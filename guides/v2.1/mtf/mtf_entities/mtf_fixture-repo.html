<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Entities of the Functional Testing Framework</title>
	<meta name="description" content="Magento 2 Developer Guide.
">

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print"/>
	<link rel="canonical" href="//guides/v2.1/mtf/mtf_entities/mtf_fixture-repo.html">

	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

</head>
<body>

<!--Search Results Overlay -->
<div class="searchResultsBack"></div>
<div id="searchResultsBox">
	<div class="searchResultsBoxClose">Close [x]<!-- <img src="/common/images/close.png" alt="Close"> --></div>
	<gcse:search></gcse:search>
	<!-- <gcse:searchresults-only></gcse:searchresults-only> -->
</div>
<!--End Search Results Overlay -->

<header class="site-header">

	<nav role="navigation">

		<div class="menu-btn">
			<a class="menu-trigger menu-icon" href="#"></a>
		</div>

		<div id="global-nav">
			<div class="main-site-name">
				<a class="logo pull-left" href="/"> </a>
				<div class="sub-site-name">
					<a href="/">Developer Documentation (2.1)</a>
				</div>
			</div>
			
<div class="version-switcher dropdown">
	<button class="btn dropdown-toggle" data-toggle="dropdown">
		Version 2.1
	</button>


	<ul class="dropdown-menu dropdown-menu-right">
	
		<li><a class="dropdown-item" href="/guides/v2.0/">Version 2.0</a></li>
	
		<li><a class="dropdown-item" href="/">Version 2.1</a></li>
	
  </ul>

</div>


		</div><!-- #global-nav -->
	</nav>

	<div class="search-btn">
		<a class="search-trigger search-icon" href="#"></a>
	</div>

</header>

<!--Sub Navigation-->
<div id="subnav-wrap" class="nav-main">
   <div id="subnav">
      <ul class="menu nav">
         <li class="first">
            <a href="#">Get Started</a>
            <ul class="menu nav">
               <li class="leaf"><a href="/guides/v2.1/architecture/bk-architecture.html">Magento Architecture</a></li>
               <li class="first leaf"><a href="/guides/v2.1/release-notes/bk-release-notes.html">Release Information</a></li>
               
            </ul>
         </li>
         <li class="first">
            <a href="#">System Administrator</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/install-gde/bk-install-guide.html">Installation Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/config-guide/bk-config-guide.html">Configuration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/migration/bk-migration-guide.html">Migration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/cloud/bk-cloud.html">Magento Enterprise Cloud Guide</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Developers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a>
               <li class="first leaf"><a href="/guides/v2.1/ui-components/ui-component.html">UI Components</a>
   			   <li class="first leaf"><a href="/guides/v2.1/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a>
               <div class="divider"></div></li>
               <li class="first leaf"><a href="/guides/v2.1/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
<li class="first leaf"><a href="/guides/v2.1/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/pattern-library/bk-pattern.html">Magento Admin Pattern Library</a></li>
               <div class="divider"></div></li>
               <li class="leaf"><a href="/guides/v2.1/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
               <li class="leaf"><a href="/guides/v2.1/rest/bk-rest.html">REST Reference</a></li>
               <li class="leaf"><a href="/guides/v2.1/soap/bk-soap.html">SOAP Reference</a>
               <div class="divider"></div></li>
               <li class="leaf"><a href="/guides/v2.1/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Designers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
               <li class="leaf"><a href="/guides/v2.1/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Contributor</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/contributor-guide/contributing.html">Contributor Guide</a></li>
            </ul>
         </li>
          <li class="first">
              <a href="/guides/v2.1/test/testing.html">Testing</a>
              <ul class="menu nav">
                  <li class="leaf"><a href="/guides/v2.1/mtf/mtf_introduction.html">Functional Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/test/integration/integration_test_execution.html">Integration Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/extension-dev-guide/test/test_js-unit.html">JavaScript Unit Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
              </ul>
          </li>
         <li class="first">
            <a href="/guides/v2.1/howdoi/bk-how-do-i.html">How Do I...?</a>
         </li>
      </ul>

      <div class ="search">
         <div class="search-icon"></div>
         <form id="searchbox" name="gs" method="GET" action="#searchResultsBox">
            <input type="hidden" name="cx" value="018116925022773002786:klu67apuihk" />
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="text" name="q" id="searchtext" value="" placeholder="Search">
         </form>
      </div><!-- END searchbox-->

      <a href="#" class="nav-close">&times;</a>

   </div> <!--End subnav -->
</div><!--End subnav-wrap -->
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- /.main-container -->
	<div id="gl-container" class="main-container">
		<a id="main-content"></a>
		<div class="pane-content">
			<div class="node node-panel">


<!-- page-header -->
<section class="page-intro">
	<div class="container">
		<h1 class="page-heading">Entities of the Functional Testing Framework</h1>
		
			<a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.1/mtf/mtf_entities/mtf_fixture-repo.md" target="_blank">Edit this page on GitHub</a>
		
		
	</div>
</section>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>Testing Framework Guide</h4>






		<ul role="navigation">

		

		

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

					
					

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/mtf_introduction.html">INTRODUCTION</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/mtf_installation.html">INSTALLATION</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/mtf_quickstart.html">QUICK START</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_quickstart/mtf_quickstart_config.html">Adjust configuration</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_quickstart/mtf_quickstart_magento.html">Prepare Magento application</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_quickstart/mtf_quickstart_environment.html">Prepare environment for test run</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_quickstart/mtf_quickstart_runtest.html">Test run</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_quickstart/mtf_quickstart_logs.html">See logs for failed tests</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/create_test.html">CREATE A TEST</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/create_test/out-of-the-box.html">Out-of-the-box test</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/create_test/new_test.html">New functional test. Theory</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/create_test/create_new_test.html">New functional test. Practice</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/mtf_entities.html">ENTITIES</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_fixture.html">Fixture</a></li>

									

								

									

									<li class="level-2  active "><a href="/guides/v2.1/mtf/mtf_entities/mtf_fixture-repo.html">Fixture Repository</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_handler.html">Handler</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_block.html">Block</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_typified-element.html">Typified element</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_page.html">Page</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_constraint.html">Constraint</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_dataset.html">Data set</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_testcase.html">Test case</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/mtf/mtf_entities/mtf_scenariotest.html">Scenario test</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/mtf_update.html">UPDATE</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/troubleshooting.html">TROUBLESHOOTING</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/mtf_changelog.html">CHANGELOG</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/mtf/mtf_overview.html">Functional testing overview</a></li>
									
								

									


								




						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<p align="right"><i>Updated: 4 July 2016 (PDT)</i></p>
		<h2>Fixture repository</h2>

<ul id="markdown-toc">
  <li><a href="#mtf_repository_overview">Repository overview</a></li>
  <li><a href="#mtf_repository_create">Create a repository for the entire fixture</a>    <ul>
      <li><a href="#mtf_repository_structure">Repository structure</a></li>
    </ul>
  </li>
  <li><a href="#mtf_repository_create-field">Create a repository for the fixture field</a></li>
  <li><a href="#mtf_repository_config">Configuration repository</a></li>
  <li><a href="#mtf_repository_merge">Merging repositories</a>    <ul>
      <li><a href="#dataset-replacement">Data set replacement</a></li>
    </ul>
  </li>
  <li><a href="#mtf_repository_credent_iso">Credentials and <code>%isolation%</code> in repository</a>    <ul>
      <li><a href="#mtf_repo_credent_path">Example with substitution by <code>path</code></a></li>
      <li><a href="#mtf_repo_credent_replace">Example with replacement by <code>replace</code></a></li>
      <li><a href="#mtf_repo_isolation"><code>%isolation%</code> placeholder</a></li>
    </ul>
  </li>
</ul>

<h2 id="mtf_repository_overview">Repository overview</h2>

<p>The repository stores pre-defined data for the fixture.
It contains only data sets that are used in the test along with the associated field data.
Repositories are stored in the <code>Repository</code> directory in the module to which they belong.
Reference to the repository is placed in the fixture XML file in attribute named <code>repository</code>.</p>

<p>In this topic you will learn how to create, use, and merge a repository.</p>

<h2 id="mtf_repository_create">Create a repository for the entire fixture</h2>

<p>Let’s create a repository for the Widget fixture <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Fixture/Widget.xml</code>.</p>

<p><a href="/guides/v2.1/mtf/mtf_entities/mtf_fixture.html">More details about fixtures</a>.</p>

<p>Assume that we have the following fixture:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">/**</span>
<span class="c"> * Copyright © 2015 Magento. All rights reserved.</span>
<span class="c"> * See COPYING.txt for license details.</span>
<span class="c"> */</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;../../../../../../vendor/magento/mtf/etc/fixture.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;fixture</span> <span class="na">name=</span><span class="s">&quot;widget&quot;</span>
             <span class="na">module=</span><span class="s">&quot;Magento_Widget&quot;</span>
             <span class="na">type=</span><span class="s">&quot;flat&quot;</span>
             <span class="na">entity_type=</span><span class="s">&quot;widget_instance&quot;</span>
             <span class="na">collection=</span><span class="s">&quot;Magento\Widget\Model\Resource\Widget\Instance\Collection&quot;</span>
             <span class="na">identifier=</span><span class="s">&quot;parameters&quot;</span>
             <span class="na">repository_class=</span><span class="s">&quot;Magento\Widget\Test\Repository\Widget&quot;</span>
             <span class="na">handler_interface=</span><span class="s">&quot;Magento\Widget\Test\Handler\Widget\WidgetInterface&quot;</span>
             <span class="na">class=</span><span class="s">&quot;Magento\Widget\Test\Fixture\Widget&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;code&quot;</span> <span class="na">group=</span><span class="s">&quot;settings&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;theme_id&quot;</span> <span class="na">group=</span><span class="s">&quot;settings&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;anchor_text&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="na">group=</span><span class="s">&quot;frontend_properties&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;template&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;chosen_option&quot;</span> <span class="na">source=</span><span class="s">&quot;Magento\Widget\Test\Fixture\Widget\ChosenOption&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;display_type&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;show_pager&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;products_count&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;cache_lifetime&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;page_size&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;store_ids&quot;</span> <span class="na">source=</span><span class="s">&quot;Magento\Widget\Test\Fixture\Widget\StoreIds&quot;</span> <span class="na">group=</span><span class="s">&quot;frontend_properties&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;widget_instance&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;parameters&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;page_id&quot;</span> <span class="na">source=</span><span class="s">&quot;Magento\Widget\Test\Fixture\Widget\PageIds&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;layout&quot;</span> <span class="na">source=</span><span class="s">&quot;Magento\Widget\Test\Fixture\Widget\LayoutUpdates&quot;</span> <span class="na">repository=</span><span class="s">&quot;Magento\Widget\Test\Repository\Widget\LayoutUpdates&quot;</span> <span class="na">group=</span><span class="s">&quot;layout_updates&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;widgetOptions&quot;</span> <span class="na">source=</span><span class="s">&quot;Magento\Widget\Test\Fixture\Widget\WidgetOptions&quot;</span> <span class="na">repository=</span><span class="s">&quot;Magento\Widget\Test\Repository\Widget\WidgetOptions&quot;</span> <span class="na">group=</span><span class="s">&quot;widget_options&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/fixture&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>

<p>The <code>repository_class="Magento\Widget\Test\Repository\Widget"</code> attribute tells us that this fixture uses data from the <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Repository/Widget.xml</code> repository.</p>

<p>In this section we will show the logic of how to create this repository.</p>

<p>Also <code>layout</code> and <code>widgetOptions</code> fields use <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Repository/Widget/LayoutUpdates.xml</code> and <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Repository/Widget/WidgetOptions.xml</code> repositories respectively.</p>

<p><a href="#mtf_repository_create-field"> Learn how to create repository for the fixture field</a>.</p>

<p>We want to specify data sets for two cases of submitting Widget forms: <code>default</code> with minimum data, and <code>cms_page_link</code> with data needed to create new CMS page link.</p>

<p>To create a new CMS page link the user must enter data of all required fields. The widget has three forms with fields to specify: <a href="#mtf_repo_ex_set"><strong>Settings</strong></a>, <a href="#mtf_repo_ex_store"><strong>Storefront Properties</strong></a>, <a href="#mtf_repo_ex_front"><strong>Frontend Apps Options</strong></a>. The following text along with screenshots gives an example of how to create a data set of the repository.</p>

<p><a href="#mtf_repo_widgetxml">See entire repository code</a>.</p>

<h4 id="mtf_repo_ex_set">Settings form</h4>

<p><img src="/common/images/mtf_ent_fixt_repo_cms_set_ui.png" alt="cms_page_link &quot;Settings&quot; data set for entire fixture view on GUI" /></p>

<ul>
  <li>Set the <strong>Type</strong> field (<code>field name="code"</code>) to “CMS Page Link”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;field name="code" xsi:type="string"&gt;CMS Page Link&lt;/field&gt;</code>.</li>
  <li>Set the <strong>Design Theme</strong> field (<code>field name="theme_id"</code>) to “Magento Blank”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;field name="theme_id" xsi:type="string"&gt;Magento Blank&lt;/field&gt;</code>.</li>
</ul>

<h4 id="mtf_repo_ex_store">Storefront Properties form</h4>

<p><img src="/common/images/mtf_ent_fixt_repo_cms_set_ui_storefront.png" alt="cms_page_link &quot;Storefront properties&quot; data set for entire fixture view on GUI" /></p>

<ul>
  <li>Set the <strong>Frontend App Title</strong> field to “Cms Page Link [random integer value]”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;field name="title" xsi:type="string"&gt;Cms Page Link %isolation%&lt;/field&gt;</code>.</li>
  <li>Set the <strong>Assign to Store Views</strong> field to “All Store Views”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a>:</li>
</ul>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;store_ids&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;dataset&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>all_store_views<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span></code></pre></div>

<ul>
  <li>Provide data for the <strong>Layout Updates</strong> complex field. In the repository code, complex fields are represented as arrays of items. An item can be an array of items also, depending on the hierarchy of fields. This field is defined as <code>&lt;field name="widget_instance" xsi:type="array"&gt;&lt;/field&gt;</code>. As it is possible to create more than one instance of a layout update, we define our instance as the first element of an array with index “0” as <code>&lt;item name="0" xsi:type="array"&gt;&lt;/item&gt;</code>.
    <ul>
      <li>Set the <strong>Display on</strong> field to “All pages:. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="page_group" xsi:type="string"&gt;All Pages&lt;/item&gt;</code>. Daughter fields are appeared, when <strong>Display on</strong> field is specified. All daughter fields must be wrapped in <code>&lt;item name="all_pages" xsi:type="array"&gt;&lt;/item&gt;</code>.
        <ul>
          <li>Set the <strong>Container</strong> field to “Main content area”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="block" xsi:type="string"&gt;Main Content Area&lt;/item&gt;</code>.</li>
          <li>Set the <strong>Template</strong> field to “CMS Page Link Block Template”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="template" xsi:type="string"&gt;CMS Page Link Block Template&lt;/item&gt;</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="mtf_repo_ex_front">Frontend App Options</h4>

<p><img src="/common/images/mtf_ent_fixt_repo_cms_set_ui_frontend-app.png" alt="cms_page_link &quot;Frontend App Options&quot; data set for entire fixture view on GUI" /></p>

<ul>
  <li>Set the <strong>Anchor Custom Text</strong> field to “text”.</li>
  <li>Set the <strong>Anchor Custom Title</strong> field to “anchor title”.</li>
  <li>Choose in the <strong>CMS Page</strong> grid newly created CMS page.</li>
</ul>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;widgetOptions&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;type_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>cmsPageLink<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span></code></pre></div>

<p>This simple code contains a bit more complex logic, where <a href="#mtf_repository_create-field">the repository is applied to the fixture field</a>. Just to remind you, how this field is represented in the fixture: <code>&lt;field name="widgetOptions" source="Magento\Widget\Test\Fixture\Widget\WidgetOptions" repository="Magento\Widget\Test\Repository\Widget\WidgetOptions" group="widget_options" /&gt;</code>.</p>

<p>In brief, we reference another repository <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Repository/Widget/WidgetOptions.xml</code>, and a <a href="/guides/v2.1/mtf/mtf_entities/mtf_fixture.html#mtf_fixture_source">source</a> that is <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Fixture/Widget/WidgetOptions.php</code>.</p>

<p>The <code>WidgetOptions.xml</code> repository includes <code>cmsPageLink</code> data set:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;cmsPageLink&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;anchor_text&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>text<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>anchor title/field&gt;
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;entities&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>cmsPage::default<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;/dataset&gt;</span></code></pre></div>

<p>The source understands the <code>entities</code> field as an instruction to create a CMS Page using <code>&lt;dataset name="default"&gt;</code> from the <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Cms/Test/Repository/CmsPage.xml</code> repository.</p>

<h4 id="mtf_repo_widgetxml">Widget.xml</h4>

<p>Now we can create a repository XML file <code>Widget.xml</code>. In our case the file should be placed in <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Repository</code>. The full name must be specified in the <code>repository_class</code> attribute of the fixture: <code>repository_class="Magento\Widget\Test\Repository\Widget"</code>.</p>

<p>See the entire repository sample so far:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">/**</span>
<span class="c"> * Copyright © 2015 Magento. All rights reserved.</span>
<span class="c"> * See COPYING.txt for license details.</span>
<span class="c"> */</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;../../../../../../vendor/magento/mtf/Magento/Mtf/Repository/etc/repository.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;repository</span> <span class="na">class=</span><span class="s">&quot;Magento\Widget\Test\Repository\Widget&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;default&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Test Frontend App<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;store_ids&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>All Store Views<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;widget_instance&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;page_group&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>all_pages<span class="nt">&lt;/item&gt;</span>
                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;all_pages&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;layout_handle&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>default<span class="nt">&lt;/item&gt;</span>
                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;for&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>all<span class="nt">&lt;/item&gt;</span>
                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;block&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>content<span class="nt">&lt;/item&gt;</span>
                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;template&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>widget/block.phtml<span class="nt">&lt;/item&gt;</span>
                    <span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;theme_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>2<span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/dataset&gt;</span>

        <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;cms_page_link&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;code&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>CMS Page Link<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Cms Page Link %isolation%<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;store_ids&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;dataset&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>all_store_views<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;widget_instance&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;page_group&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>All Pages<span class="nt">&lt;/item&gt;</span>
                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;all_pages&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;block&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Main Content Area<span class="nt">&lt;/item&gt;</span>
                        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;template&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>CMS Page Link Block Template<span class="nt">&lt;/item&gt;</span>
                    <span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;theme_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Magento Blank<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;widgetOptions&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;type_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>cmsPageLink<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/dataset&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>

<h3 id="mtf_repository_structure">Repository structure</h3>

<p>Let’s look at the repository structure.</p>

<ul>
  <li><code>&lt;config&gt;</code> is a root node that defines the path to the <code>repository.xsd</code> schema.</li>
  <li><code>&lt;repository&gt;</code> specifies a repository class in the required <code>class</code> attribute and stores data sets. <code>class</code> contains the full name of the repository class. The repository contains data sets.
    <ul>
      <li>In case of an entire fixture repository, the full name of the class (including the namespace) must be built as <code>&lt;path to module where the fixture is placed&gt;\Repository\&lt;file with the name of fixture&gt;</code>. Example: <code>Magento\Widget\Test\Repository\Widget</code></li>
      <li>In case of a fixture field repository, the full name of the class (including the namespace) must be built as <code>&lt;path to module where the fixture is placed&gt;\Repository\&lt;directory with the name of fixture&gt;\&lt;file with the name of field&gt;</code>. Example: <code>Magento\Widget\Test\Repository\Widget\LayoutUpdates</code>.</li>
    </ul>
  </li>
  <li><code>&lt;dataset&gt;</code> specifies the name of data set in the required <code>name</code> attribute. This name serves as a reference to the data set that will be used in the test. Each data set contains fields.</li>
  <li><code>&lt;field&gt;</code> defines the value of the field. Field can contain either value, or items if the field is complex.</li>
</ul>

<table>
  <thead>
    <tr>
      <th><code>field</code> attribute</th>
      <th>Semantics</th>
      <th>Is required?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code></td>
      <td>Field name in fixture</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>xsi:type</code></td>
      <td>Type of field value</td>
      <td>Required</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><code>field</code> daughter element</th>
      <th>Semantics</th>
      <th>Is required?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>&lt;item&gt;</code></td>
      <td>Element of complex field. Items can be complex like fields. Complex items contain items. Item has <code>key=&gt;value</code> structure.</td>
      <td>Required if <code>&lt;field xsi:type="array" ...&gt;</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><code>item</code> attribute</th>
      <th>Semantics</th>
      <th>Is required?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code></td>
      <td>Key name of the item</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>xsi:type</code></td>
      <td>Type of the item value</td>
      <td>Required</td>
    </tr>
  </tbody>
</table>

<p>The <code>default</code> data set is used in the test when the repository hasn’t been specified in the test, although you can explicitly specify <code>default</code>. If repository name in the test is <code>cms_page_link</code>, then fields will be filled with data from <code>&lt;dataset name="cms_page_link"&gt;</code>.</p>

<h2 id="mtf_repository_create-field">Create a repository for the fixture field</h2>

<p>In the preceding section, the Widget fixture code contains fields with the links for repositories. Let’s consider the field <code>layout</code> with <code>repository="Magento\Widget\Test\Repository\Widget\LayoutUpdates</code>.</p>

<p>The repository value is a reference to the repository XML file. Therefore, we should create <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Repository/Widget/LayoutUpdates.xml</code>. The XML structure of this repository is the same as of <a href="#mtf_repository_create">repository for the entire fixture</a>.</p>

<p>Assume that we want to provide data for the Layout Update block for the following cases shown on the screenshots (name of data sets have orange font, fields defined in repository are highlighted in orange).</p>

<p>Case 1. <strong>all_pages</strong> data set:</p>

<ul>
  <li>Set the <strong>Display on</strong> field (<code>item name="page_group"</code>) to “All Pages”, which is the subcategory of “Generic Pages” (see drop-down menu on the following screenshot). It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="page_group" xsi:type="string"&gt;Generic Pages/All Pages&lt;/item&gt;</code></li>
  <li>Set the <strong>Container</strong> field (<code>item name="block"</code>) to “Main content Area”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a>  <code>&lt;item name="block" xsi:type="string"&gt;Main Content Area&lt;/item&gt;</code></li>
</ul>

<p><img src="/common/images/mtf_repository_layout-allpages_w_dropd.png" alt="all_pages data set view on GUI" /></p>

<p>Case 2. <strong>on_category</strong> data set:</p>

<ul>
  <li>Set the <strong>Display on</strong> field (<code>item name="page_group"</code>) to “Non-Anchor Categories” that is item of “Categories”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="page_group" xsi:type="string"&gt;Categories/Non-Anchor Categories&lt;/item&gt;</code>.</li>
  <li>Set the <strong>Categories</strong> field (<code>item name="for"</code>) to “Specific Categories”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="for" xsi:type="string"&gt;Yes&lt;/item&gt;</code>.</li>
  <li>Set the in a tree of categories the <strong>Default Category</strong> (<code>item name="entities"</code>). It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="entities" xsi:type="string"&gt;category::default_subcategory&lt;/item&gt;</code>.</li>
  <li>Set the <strong>Container</strong> field (<code>item name="block"</code>) to “Main content Area”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="block" xsi:type="string"&gt;Main Content Area&lt;/item&gt;</code>.</li>
</ul>

<p><img src="/common/images/mtf_repository_layout-oncategory_w_dropd.png" alt="on_category data set view on GUI" /></p>

<p>Case 3. <strong>for_cms_page_link</strong> data set:</p>

<ul>
  <li>Set the <strong>Display on</strong> field (<code>item name="page_group"</code>) to “All Pages” that is item of “Generic Pages”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="page_group" xsi:type="string"&gt;Generic Pages/All Pages&lt;/item&gt;</code>.</li>
  <li>Set the <strong>Container</strong> field (<code>item name="block"</code>) to “Main content Area”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;item name="block" xsi:type="string"&gt;Main Content Area&lt;/item&gt;</code>.</li>
  <li>Set the <strong>Template</strong> field (<code>item name="template"</code>) to “CMS Page Link Block Template”. It corresponds to the following code in <a href="#mtf_repo_widgetxml">the repository data set</a> <code>&lt;</code>item name=”template” xsi:type=”string”<code>&gt;CMS Page Link Block Template&lt;/item&gt;</code>.</li>
</ul>

<p><img src="/common/images/mtf_repository_layout-for-cms-page-link_w_dropd.png" alt="layout_for_cms_page_link data set view on GUI" /></p>

<p>The repository code for these cases follows:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">/**</span>
<span class="c"> * Copyright © 2015 Magento. All rights reserved.</span>
<span class="c"> * See COPYING.txt for license details.</span>
<span class="c"> */</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;../../../../../../../vendor/magento/mtf/Magento/Mtf/Repository/etc/repository.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;repository</span> <span class="na">class=</span><span class="s">&quot;Magento\Widget\Test\Repository\Widget\LayoutUpdates&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;all_pages&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;page_group&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Generic Pages/All Pages<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;block&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Main Content Area<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/dataset&gt;</span>

        <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;on_category&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;page_group&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Categories/Non-Anchor Categories<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;for&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Yes<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;entities&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>category::default_subcategory<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;block&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Main Content Area<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/dataset&gt;</span>

        <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;for_cms_page_link&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;0&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;page_group&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Generic Pages/All Pages<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;block&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Main Content Area<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;template&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>CMS Page Link Block Template<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/dataset&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>

<h2 id="mtf_repository_config">Configuration repository</h2>

<p>The configuration repository stores predefined data sets for Magento configuration settings. It is the repository for the <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Config">Magento_Config module</a> and is named <code>ConfigData.xml</code>.</p>

<p>Let’s see the following example of configuration settings for <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Authorizenet">Authorize.Net module</a> <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Authorizenet/Test/Repository/ConfigData.xml</code>.</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">/**</span>
<span class="c"> * Copyright © 2015 Magento. All rights reserved.</span>
<span class="c"> * See COPYING.txt for license details.</span>
<span class="c"> */</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;../../../../../../vendor/magento/mtf/Magento/Mtf/Repository/etc/repository.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;repository</span> <span class="na">class=</span><span class="s">&quot;Magento\Config\Test\Repository\ConfigData&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;authorizenet&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;payment/authorizenet/active&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>payment<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Yes<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;payment/authorizenet/login&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>payment<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>PAYMENT_AUTHORIZENET_LOGIN<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;payment/authorizenet/trans_key&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>payment<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>PAYMENT_AUTHORIZENET_TRANS_KEY<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;payment/authorizenet/test&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>payment<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>No<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>0<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;payment/authorizenet/cgi_url&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>payment<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>https://test.authorize.net/gateway/transact.dll<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;payment/authorizenet/debug&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>payment<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Yes<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;payment/authorizenet/useccv&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>payment<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Yes<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/dataset&gt;</span>
        <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;authorizenet_rollback&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;payment/authorizenet/active&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>payment<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>No<span class="nt">&lt;/item&gt;</span>
                <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>0<span class="nt">&lt;/item&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/dataset&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>

<p>Path to the <code>Authorizenet</code> UI form in Admin is <strong>STORES &gt; Configuration &gt; SALES &gt; Payment Methods &gt; Authorize.net Direct Post</strong>.</p>

<p>This repository contains two data sets: <code>authorizenet</code> that covers seven fields, and <code>authorizenet_rollback</code> that covers one field.</p>

<p>Semantics of the field attributes:</p>

<table>
  <thead>
    <tr>
      <th><code>field</code> attribute</th>
      <th>Semantics</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code></td>
      <td>Path to the Magento UI element</td>
      <td>Example: <code>payment/authorizenet/active</code>.</td>
    </tr>
    <tr>
      <td><code>xsi:type</code></td>
      <td>Type of the field content</td>
      <td><code>array</code></td>
    </tr>
  </tbody>
</table>

<p>Each field contains 4 items:</p>

<table>
  <thead>
    <tr>
      <th>Item name</th>
      <th>Semantics</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>scope</code></td>
      <td>Magento configuration section</td>
    </tr>
    <tr>
      <td><code>scope_id</code></td>
      <td>Magento scope identifier. UI representation is shown on the screenshot following this table.</td>
    </tr>
    <tr>
      <td><code>label</code></td>
      <td>Text represented in the UI field</td>
    </tr>
    <tr>
      <td><code>value</code></td>
      <td>Value of the field</td>
    </tr>
  </tbody>
</table>

<p>The following screenshot helps to understand the <code>scope_id</code> attribute.</p>

<p><img src="/common/images/mtf_ent_fixt_repo_config_scope-id.png" alt="authorizenet data set view on GUI" /></p>

<p>Let’s see the <code>authorizenet</code> data set in action. Fields defined in repository are in orange. Other fields are set in default values.</p>

<p><img src="/common/images/mtf_repo_config_ex.png" alt="authorizenet data set view on GUI" /></p>

<h2 id="mtf_repository_merge">Merging repositories</h2>

<p>The FTF enables you to split data sets among different modules. The configuration repository is a good example.</p>

<p>Modules that require configuration adjustment store <code>ConfigData.xml</code> in their <code>Repository</code> directory. All <code>ConfigData.xml</code> repositories have reference to the <code>Config</code> repository class. See the example on the following screenshot:</p>

<p><a href="/common/images/mtf_repo_merge_ex.png"><img src="/common/images/mtf_repo_merge_ex.png" /></a></p>

<p>As you can see, the <code>ConfigData.xml</code> of the <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Authorizenet"><code>Magento_Authorizenet</code> module</a> and the <code>ConfigData.xml</code> of the <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Backend"><code>Magento_Backend</code> module</a> have the same reference to the repository class; that is <code>Magento\Config\Test\Repository\ConfigData</code>.</p>

<p><code>ConfigData.php</code> will be generated in <code>&lt;magento2&gt;/dev/tests/functional/generated/Magento/Config/Test/Repository</code>. This PHP repository will contain repository data sets from all Magento modules that have a <code>ConfigData.xml</code> repository.</p>

<p>To run the generator, enter the following command in your terminal:</p>

<pre><code>php &lt;magento2&gt;/dev/tests/functional/utils/generate.php
</code></pre>

<p>The preceding is an example of repository merging. Using the approach from the example you can merge repositories for any other fixture, not <code>Config</code> only.</p>

<h3 id="dataset-replacement">Data set replacement</h3>

<p>You can modify your data set without changing the name of the data set. Simply use a <code>replace</code> attribute. For example,</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;customer_new_default&quot;</span> <span class="na">replace=</span><span class="s">&quot;default&quot;</span><span class="nt">&gt;</span></code></pre></div>

<p>This node means that <code>customer_new_default</code> data set replaces <code>default</code> data set.</p>

<p>Let’s see a use case example. Assume that the Customer fixture in the Magento_Customer module has a repository with the <code>default</code> data set:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;../../../../../../vendor/magento/mtf/Magento/Mtf/Repository/etc/repository.xsd&quot;</span><span class="nt">&gt;</span>
     <span class="nt">&lt;repository</span> <span class="na">class=</span><span class="s">&quot;Magento\Customer\Test\Repository\Customer&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;default&quot;</span><span class="nt">&gt;</span>
             <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;firstname&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>John<span class="nt">&lt;/field&gt;</span>
             <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;lastname&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Doe<span class="nt">&lt;/field&gt;</span>
             <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;group_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
                 <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;dataset&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>General<span class="nt">&lt;/item&gt;</span>
             <span class="nt">&lt;/field&gt;</span>
             <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>JohnDoe_%isolation%@example.com<span class="nt">&lt;/field&gt;</span>
             <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>123123q<span class="nt">&lt;/field&gt;</span>
             <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;password_confirmation&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>123123q<span class="nt">&lt;/field&gt;</span>
         <span class="nt">&lt;/dataset&gt;</span>
     <span class="nt">&lt;/repository&gt;</span>
 <span class="nt">&lt;/config&gt;</span></code></pre></div>

<p>Later you installed a new module Magento_CustomerNew module that changed Customer fixture. You don’t want to change the <code>default</code> data set name in the test. Instead, you can simply replace the <code>default</code> data set, without changing the name:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;../../../../../../vendor/magento/mtf/Magento/Mtf/Repository/etc/repository.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;repository</span> <span class="na">class=</span><span class="s">&quot;Magento\Customer\Test\Repository\Customer&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;dataset</span> <span class="na">name=</span><span class="s">&quot;customer_new_default&quot;</span> <span class="na">replace=</span><span class="s">&quot;default&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;firstname&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>John<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;lastname&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Doe<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>JohnDoe_%isolation%@example.com<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;new_field&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Some value<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>123123q<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;password_confirmation&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>123123q<span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/dataset&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>

<p>After the repository generation </p>

<pre><code>php &lt;magento2&gt;/dev/tests/functional/utils/generate.php
</code></pre>

<p>you have the following code in the Customer repository (<code>&lt;magento2&gt;/dev/tests/functional/generated/Magento/Customer/Test/Repository/Customer.php</code>):</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;firstname&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span>
  <span class="s1">&#39;lastname&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Doe&#39;</span><span class="p">,</span>
  <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;JohnDoe_%isolation%@example.com&#39;</span><span class="p">,</span>
  <span class="s1">&#39;new_field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Some value&#39;</span><span class="p">,</span>
  <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;123123q&#39;</span><span class="p">,</span>
  <span class="s1">&#39;password_confirmation&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;123123q&#39;</span><span class="p">,</span>
<span class="p">];</span></code></pre></div>

<p>As you can see, a repository with the name <code>default</code> contains data from the <code>customer_new_default</code> repository.</p>

<h2 id="mtf_repository_credent_iso">Credentials and <code>%isolation%</code> in repository</h2>

<p>Credentials are stored in an <code>*.xml</code> file that is specified in <code>phpunit.xml</code>.</p>

<p>You can find a template for credentials in <a href="https://github.com/magento/magento2/blob/2.0/dev/tests/functional/credentials.xml.dist"><code>&lt;magento2&gt;/dev/tests/functional/credentials.xml.dist</code></a>.</p>

<p>Credentials always should stay invisible for security reasons. The FTF implicitly pastes credentials during the test run only.
There are two ways to paste credentials:</p>

<ul>
  <li><strong>Using path</strong>. If a field in a repository has a <code>name</code> that matches field <code>path</code> in <code>credentials.xml</code>, then the value of this field will be substituted for the value from <code>credential.xml</code> during the test.</li>
  <li><strong>Using placeholder</strong>. If a field in a repository has value wrapped in <code>% %</code> that matches the value of the <code>replace</code> field attribute in <code>credentials.xml</code>, then the value of this field will be substituted for the value from <code>credential.xml</code> during the test.</li>
</ul>

<h3 id="mtf_repo_credent_path">Example with substitution by <code>path</code></h3>

<p>Assume, that you have the following credentials in <code>credentials.xml</code>.</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;field</span> <span class="na">path=</span><span class="s">&quot;carriers/ups/password&quot;</span> <span class="na">value=</span><span class="s">&quot;strong_password&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">path=</span><span class="s">&quot;carriers/ups/username&quot;</span> <span class="na">value=</span><span class="s">&quot;my_name&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">path=</span><span class="s">&quot;carriers/ups/access_license_number&quot;</span> <span class="na">value=</span><span class="s">&quot;20150825&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">path=</span><span class="s">&quot;carriers/ups/shipper_number&quot;</span> <span class="na">value=</span><span class="s">&quot;321852741789&quot;</span> <span class="nt">/&gt;</span></code></pre></div>

<p>In the repository these fields can be defined as:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;carriers/ups/password&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>carriers<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>CARRIERS_UPS_PASSWORD<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;carriers/ups/username&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>carriers<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>CARRIERS_UPS_USERNAME<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;carriers/ups/access_license_number&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>carriers<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>CARRIERS_UPS_ACCESS_LICENSE_NUMBER<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;carriers/ups/shipper_number&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>carriers<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>CARRIERS_UPS_SHIPPER_NUMBER<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span></code></pre></div>

<p>During the test run these fields are filled with values from <code>credentials.xml</code>.</p>

<h3 id="mtf_repo_credent_replace">Example with replacement by <code>replace</code></h3>

<p>For example, you have the following credentials in <code>credentials.xml</code>:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;field</span> <span class="na">replace=</span><span class="s">&quot;carriers_dhl_id_eu&quot;</span> <span class="na">value=</span><span class="s">&quot;123654987&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">replace=</span><span class="s">&quot;carriers_dhl_password_eu&quot;</span> <span class="na">value=</span><span class="s">&quot;my_dh1_pas$worD&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">replace=</span><span class="s">&quot;carriers_dhl_account_eu&quot;</span> <span class="na">value=</span><span class="s">&quot;8521236987452&quot;</span> <span class="nt">/&gt;</span></code></pre></div>

<p>Then you should define repository fields as the following:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;carriers/dhl/id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>carriers<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>%carriers_dhl_id_eu%<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;carriers/dhl/password&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>carriers<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>%carriers_dhl_password_eu%<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;carriers/dhl/account&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>carriers<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;scope_id&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;number&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;label&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;value&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>%carriers_dhl_account_eu%<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/field&gt;</span></code></pre></div>

<p>When the test is run, credentials from <code>credentials.xml</code> are transferred to the defined fields.</p>

<h3 id="mtf_repo_isolation"><code>%isolation%</code> placeholder</h3>

<p>You can use <code>%isolation%</code> placeholder where you want to put a random value. It is useful when you need a unique value, for example <code>sku</code>, that has to be unique each test cycle.</p>

<p>Some examples:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Cms Page Link %isolation%<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;sku&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>sku_simple_product_%isolation%<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;url_key&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>simple-product-%isolation%<span class="nt">&lt;/field&gt;</span></code></pre></div>

<p>All placeholders <code>%isolation%</code> will be replaced with <a href="http://php.net/manual/en/function.mt-rand.php"><code>mt_rand()</code></a> function during the test run.</p>


		</div>
	</section>
<!-- /main content -->


</div> <!-- container -->


		</div>
		</div>
	</div>


</div>
<!-- -->
<!--Global footer-->
<div id="footer-wrap">
    <div class="footer">
        <div id="magento-com">
            <div class="container">
                <div id="f-col-1">
                    <a href="http://www.magento.com/">
                        <img src="/i/magento_logo_footer.svg" alt="Magento Commerce" style="width: 190px;" />
                    </a>
                    <ul class="nav">
                        <li><a href="http://magento.com/company/about-us" title="Company">About Us</a></li>
                        <li><a href="http://magento.com/company/careers" title="Careers">Careers</a></li>
                        <li><a href="http://magento.com/company/press-room" title="Press Room">Press Room</a></li>
                        <li><a href="http://magento.com/company/leadership" title="Leadership">Leadership</a></li>
                    </ul>
                </div>
                <div id="f-col-2">
                    <div id="f-col-2-1">
                        <div class="contact-us">
                            <h4>Get in touch</h4>
                            <p>We'd like to hear from you! Call us, <br />send us an email or talk to sales.</p>
                            <a href="http://magento.com/company/contact-us" class="btn large copper">Contact Us</a>
                        </div>
                    </div>
                    <div id="f-col-2-2">
                        <div id="social-network">
                            <h4>Stay Connected</h4>
                            <ul>
                                <li><a class="btn-facebook" target="_blank" href="http://www.facebook.com/magento">Magento Facebook</a>
                                </li>
                                <li><a class="btn-twitter" target="_blank" href="https://twitter.com/magento">Magento Twitter</a></li>
                                <li><a class="btn-lnkdn" target="_blank" href="http://www.linkedin.com/groups?home=&amp;gid=146360&amp;trk=anet_ug_hm">Magento Linkedin</a></li>
                                <li><a class="btn-gplus" target="_blank" href="https://plus.google.com/+magento/posts">Magento Google+</a></li>
                                <li><a class="btn-youtube" target="_blank" href="http://www.youtube.com/user/magentocommerce/featured">Magento
                                    Youtube</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="f-col-3">
                    <div id="newsletter">
                        <h4>GET THE LATEST NEWS</h4>
                        <p>See Magento in the news, find press<br/> releases and resources for media.</p>
                        <div class="hold-form">
                            <div id="nws-notsubscribed">
                                <div id="sb-email" class="sb-email">
                                    <form method="post" enctype="application/x-www-form-urlencoded"
                                          action="//info2.magento.com/index.php/leadCapture/save" id="mktForm_1182" class="mktform"
                                          name="mktForm_1182" onsubmit="return validateForm();">
                                        <input class="fValidate['email'] input-topbg sb-email-input" name="Email" id="Email"
                                               placeholder="email address">
                                        <input type="hidden" name="formid" value="1182" />
                                        <button type="submit" class="sb-icon-submit btn outline">
                                            Sign Up
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="email-invalid hide">
                            <p>Please submit a valid email.</p>
                        </div>
                        <div class="email-ty hide">
                            <p>Thank you for submitting your email.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="copyright">
        <div class="container">
            <div class="copyright-date">&copy; 2016 Magento, Inc. All rights reserved.</div>
            <div class="copyright-links">
                <ul class="nav">
                    <li><a title="Privacy Policy" href="http://magento.com/legal/terms/privacy">Privacy Policy</a></li>
                    <li><a title="Terms of Service" href="http://magento.com/legal/terms">Terms of Service</a></li>
                    <li><a title="License/Trademark FAQ" href="http://magento.com/legal/licensing">License/Trademark FAQ</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="/common/js/jsCookie.js"></script>
<script src="/common/js/devdocs.js"></script>
<script src="/common/js/jquery-ui.min.js"></script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>

<script src="/js/app.js"></script>


<!--Google Custom Search-->
<script>
  (function() {
    var cx = '018116925022773002786:klu67apuihk';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>


<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>

